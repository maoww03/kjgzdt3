<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <!-- seo -->
    <title>空间工作底图</title>
    <meta content="" name="keywords" />
    <meta content="" name="description" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!-- 双核浏览器默认内核 webkit/ie-comp/ie-stand -->
    <meta name="renderer" content="webkit" />
    <!-- 禁止百度转码 -->
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link href="css/ol.css" type="text/css" rel="stylesheet" />
    <link href="css/iclient-ol.min.css" type="text/css" rel="stylesheet" />
    <link href="css/zTreeStyle/zTreeStyle.css" type="text/css" rel="stylesheet" />
    <link href="css/jquery.nouislider.css" type="text/css" rel="stylesheet" />
    <link href="css/index.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />

    <script src="scripts/proj4.js"></script>
    <script src="scripts/turf.min.js"></script>
    <script src="scripts/ol.js"></script>
    <script src="scripts/SuperMap-7.1-11828.js"></script>
    <script src="scripts/iclient-ol.min.js"></script>
    <script src="scripts/appConfig.js"></script>
    <script src="scripts/jquery-1.11.1.min.js"></script>

    <script src="scripts/jquery.ztree.all-3.5.min.js"></script>
    <script src="scripts/jquery.ztree.exhide.min.js"></script>
    <script src="scripts/jquery.nouislider.min.js"></script>
    <script src="scripts/RangeSlider.js"></script>

    <script src="scripts/search.js"></script>
  </head>

  <body id="body">
    <!-- 00000000 -->
      <div id="mapDiv2" style="width:100%; height: auto; overflow: hidden; position: absolute; top: 0px; bottom: 0px; left: 0px;right:0px;">
        <div style="margin: 5px 10px 0 22px;line-height: 21px; z-index: 99999;position: absolute;top: 20px; left: 20px;" class="option">
          <select id="selectLayer" style="width: 320px; height: 40px; margin-left:8px;border: 1px solid #e9edf0;border-radius: 3px;padding-left: 14px;box-shadow: rgb(0 0 0 / 18%) 0px 6px 12px;">
              <option value="-1">请选择数据库</option>
          </select>
        </div>

        <div style="width: 38px;
        height: 38px;
        z-index: 99999;
        background-color: white;
        border: 1px solid #e4e4e4;
        border-radius: 5px;
        position: absolute;
        top: 26px;
        left: 374px;box-shadow: rgb(0 0 0 / 18%) 0px 6px 12px;" id="addBtn">
            <img src="image/index2/tj.png" alt="" style="    right: 5px;
            position: absolute;
            top: 6px;;">
        </div>

        <div style="width: 38px;
        height: 38px;
        z-index: 99999;
        background-color: white;
        border: 1px solid #e4e4e4;
        border-radius: 5px;
        position: absolute;
        top: 26px;
        left:415px ;box-shadow: rgb(0 0 0 / 18%) 0px 6px 12px;" id="confilict_Btn">
            <img src="image/index2/fenxi.png" alt="" style="    right: 5px;
            position: absolute;
            top: 6px;;">
        </div>

        <div style="width: 38px;
        height: 38px;
        z-index: 99999;
        background-color: white;
        border: 1px solid #e4e4e4;
        border-radius: 5px;
        position: absolute;
        top: 26px;
        left: 456px;box-shadow: rgb(0 0 0 / 18%) 0px 6px 12px;" id="clear">
            <img src="image/index2/qc.png" alt="" style="    right: 5px;
            position: absolute;
            top: 6px;;">
        </div>

        
<!-- clear -->
        <div id='addview' style="    width: 447px;
        position: absolute;
        z-index: 99999;
        top: -58px;
        left: 68px;">
        </div>

        <div id='changeview'> </div>

          <!-- <div style="z-index: 99999;position: absolute;">数据库  选择之后打开图层 appConfig.map.getLayers().array_ Theme</div>
          <div style="z-index: 99999;position: absolute;">增加 需要下载模板 </div>
          <div style="z-index: 99999;position: absolute;">删除</div>
          <div style="z-index: 99999;position: absolute;">修改</div> -->

      </div>

      <div id="mapDiv" style="width:100%; height: auto; overflow: hidden; position: absolute; top: 0px; bottom: 0px; left: 0px;right:0px;">
         
          <div id="maptool" style="width:37px;height:auto;position:absolute;right:20px;z-index:9999;bottom:110px;"></div>

          <div id="baseMapChange"
               style="
          z-index: 999;
          position: absolute;
          bottom: 110px;
          right: 20px;
          width: 100px;
          height: 54px;
          background-color: white;
          box-shadow: 0 6px 12px rgb(0 0 0 / 18%);
          cursor: pointer;
        ">

              <div id="baseMapChangeContent"
                   style="position: absolute; bottom: 0px; right: 0px; width: 100px; height: 54px; cursor: pointer; transition: 2s right">
                  <div id="baseMapChange-container" style="width: 100%; height: 100%; position: relative"></div>
              </div>
              <div style="width: 100%; height: 100%; position: relative">
                  <div style="position: absolute;
    font-size: 12px;
    color: white;
    height: 20px;
    line-height: 20px;width:100%;background-color:rgba(0,0,0,0.5);">
                      <input type="checkbox" style="position: absolute;left: 15px;" id="isgreyBtn" checked /><div style="position: absolute;width: 100%;
    left: 33px;">开启灰度</div>
                  </div>
                  <img id="baseMapChangeSelect-logo"
                       style="
              display: inline-block;
              width: calc(100% - 2px);
              max-width: calc(100% - 1px);
              height: auto;
              max-height: 54px;
              margin: 0 auto;
              margin-top: 1px;
              margin-left:1px;
              border: 1px solid white;
            " />
                  <div id="baseMapChangeSelect-caption"
                       style="
              width: auto;
              height: 20px;
              line-height: 20px;
              color: white;
              font-size: 12px;
              font-family: 'Microsoft YaHei';
              overflow: hidden;
              position: absolute;
              right: 5px;
              bottom: 0px;
              text-align: right;
            "></div>
              </div>
          </div>

          <!-- <div id="coordinateDom" style="width:340px; height:30px;background:white;right:20px;bottom:10px;z-index:999;position:absolute;padding-left:5px;padding-right:5px;border-radius:3px;line-height:30px">
              CGCS2000平面坐标系：
          </div> -->
          <div style="width:195px; height:90px;background:rgba(255,255,255,0.50);right:20px;bottom:10px;z-index:999;position:absolute;padding-left:5px;border-radius:3px;line-height:30px;box-shadow: 0 6px 12px rgb(0 0 0 / 18%);font-size: 13px;">
            <div style="width:100%;height:30px;line-height:30px;">坐标系：CGCS2000平面坐标系</div>
            <div id="scaleDom" style="width:100%;height:30px;line-height:30px;"></div>
            <div id="coordinateDom" style="width:100%;height:30px;line-height:30px;"></div>
        </div>
      </div>
      <!-- 00000001 -->
  </body>

  <script type="text/javascript">
    var _frame = null;
    var _dragZoom = null;
      var projection_4549 = null;
      var _controls = [];
      var _catalogs = [];
      var popup = null;
      var closer = null;
    //  "FrameWork/sidebox/sidebox", "FrameWork/sidebox/sideboxConfig",
    // sidebox, sideboxConfig ,
    require([
      "dojo/ready",
      "FrameWork/MapUtil/Map_gb",
      "dojo/on",
      "FrameWork/Frame",
      "dojo/_base/array",
      "FrameWork/serviceUtil/gisocnService",
      "FrameWork/AddData2/addData",
    ], function (ready, Map, on, Frame, array, gisocnService, addData) {
        ready(function () {

            var adddata = new addData();
            adddata.startup();

            _frame = new Frame();
            //proj4.defs(appConfig.proj4.name, appConfig.proj4.value);
            //projection_4490 = new ol.proj.Projection({
            //  code: "EPSG:4490",
            //  extent: [119, 26, 123, 29],
            //  units: "degree",
            //  axisOrientation: "neu",
            //  metersPerUnit: (Math.PI * 6378137) / 180,
            //  global: false,
            //  worldExtent: [-180, -90, 180, 90],
            //});
            //ol.proj.addProjection(projection_4490);
            //var map = Map.init("mapDiv", projection_4490);
            proj4.defs(appConfig.proj4.name, appConfig.proj4.value);
            projection_4549 = new ol.proj.Projection({
                code: "EPSG:4549",
                extent: [536560.6875, 3077533.75, 594826.5625, 3114104.5],
                units: "m",
                axisOrientation: 'neu',
                global: false,
                worldExtent: [347872.25, 2703739.74, 599933.05, 5912395.20],
            });
            ol.proj.addProjection(projection_4549);
            var map = Map.init("mapDiv", projection_4549);

            gisocnService.Login().then(function (result) {
                if (result.code == "000000") {
                    appConfig.access_token = result.data.access_token;
                    //var _data = {
                    //    authorizeType: null,
                    //    depts: "",
                    //    endDate: "",
                    //    ids: "",
                    //    limit: 20,
                    //    name: "测试",
                    //    page: 0,
                    //    source: "",
                    //    startDate: ""
                    //};
                    //gisocnService.queryServiceByPage(_data).then(function (result) {

                    //    if (result.code == "000000") {
                    //        gisocnService.getServiceById(result.data.records[4].id).then(function (result) {
                    //            if (result.code == "000000") {
                    //                gisocnService.restDataInfo(result.data.id, result.data.source).then(function (result) {
                    //                    debugger;
                    //                });
                    //            }
                    //        })
                    //    }
                    //})
                } else {
                    alert(result.msg);
                }
            })



        });
    });
  </script>
</html>
